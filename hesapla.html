<!DOCTYPE html>
<html lang="tr">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Elite LED | Hizmetlerimiz</title>
  <meta name="description"
    content="LED modül tamiri, kontrol kartı programlama, montaj ve bakım. Fiyatlandırma için ekspertiz yapılır." />
  <link rel="icon" href="img/NewLogo.jpg" />
  <link rel="stylesheet" href="nav.css">
  <link rel="stylesheet" href="hesapla.css" />
</head>

<body>

  <!-- ===== NAV (CSS-only hamburger) ===== -->
  <nav class="nav">
    <div class="container nav__wrap">
      <a class="brand" href="index.html">
        <img src="img/newLogo.PNG" alt="Elite LED" />
        <span>Elite LED</span>
      </a>

      <input type="checkbox" id="menu-toggle" class="nav__checkbox" aria-label="Menüyü aç/kapat"
        aria-controls="primary-menu" aria-expanded="false" />
      <label for="menu-toggle" class="nav__hamburger">
        <span></span><span></span><span></span>
      </label>

      <ul class="nav__links" id="primary-menu">
        <li><a href="index.html">Anasayfa</a></li>
        <!-- <li><a href="product.html">Ürünlerimiz</a></li> -->
        <li><a href="service.html" aria-current="page">Hizmetlerimiz</a></li>
        <li><a href="index.html#portfolio">Çalışmalar</a></li>
        <li><a href="blog.html">Blog</a></li>

        <li><a href="index.html#iletisim">İletişim</a></li>
      </ul>
      <script>
        (function () {
          var checkbox = document.getElementById('menu-toggle');
          var menu = document.getElementById('primary-menu');
          var hamburger = document.querySelector('.nav__hamburger');
          if (checkbox) {
            checkbox.addEventListener('change', function () {
              checkbox.setAttribute('aria-expanded', checkbox.checked ? 'true' : 'false');
            });
            if (menu) {
              Array.prototype.forEach.call(menu.querySelectorAll('a'), function (a) {
                a.addEventListener('click', function () { checkbox.checked = false; checkbox.setAttribute('aria-expanded', 'false'); });
              });
            }
            if (hamburger) { hamburger.setAttribute('tabindex', '0'); hamburger.addEventListener('keydown', function (e) { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); checkbox.checked = !checkbox.checked; checkbox.dispatchEvent(new Event('change')); } }); }
          }
        })();
      </script>
    </div>
  </nav>
  <div class="header-spacer"></div>


  <div class="container">
    <h1>Profesyonel LED Ekran Fiyat Hesaplama (USD)</h1>
    <label for="alan">Kullanım Alanı</label>
    <select id="alan">
      <option value="ic">İç Mekan</option>
      <option value="dis">Dış Mekan</option>
    </select>
    
    <label for="montajTipi">Ekran Montaj Tipi</label>
    <select id="montajTipi">
      <option value="duvar">Duvara Monte</option>
      <option value="ayakli">Ayaklı Stand (Poster)</option>
    </select>

    <label for="kasaTipi">Kasa Tipi</label>
    <select id="kasaTipi">
      <option value="tek">Tek Taraflı</option>
      <option value="cift">Çift Taraflı</option>
    </select>

    <label for="mesafe">İzleme Mesafesi (metre)</label>
    <input type="number" id="mesafe" placeholder="Örn: 3">
    
    <label for="pikselAraligi">Piksel Aralığı</label>
    <select id="pikselAraligi">
        <option value="p1.86">P1.86</option>
        <option value="p2.5">P2.5</option>
        <option value="p3">P3</option>
        <option value="p4">P4</option>
        <option value="p5">P5</option>
        <option value="p8">P8</option>
        <option value="p10">P10</option>
    </select>

    <label>Ekran Boyutu</label>
    <div class="row">
      <div>
        <label for="genislik">Genişlik (cm)</label>
        <select id="genislik"></select>
      </div>
      <div>
        <label for="yukseklik">Yükseklik (cm)</label>
        <select id="yukseklik"></select>
      </div>
    </div>

    <div id="pixelInfo">Ekran Çözünürlüğü: Lütfen seçim yapınız...</div>

    <button id="hesaplaButton">Fiyat Hesapla</button>

    <div class="result" id="sonuc"></div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
    
        const PRICES = {
            modules: {
                ic: { 
                    'p1.86': { fiyat: 25.00, piksel: { w: 172, h: 86 } }, 'p2.5':  { fiyat: 15.50, piksel: { w: 128, h: 64 } },
                    'p3':    { fiyat: 12.50, piksel: { w: 104, h: 52 } }, 'p4':    { fiyat: 10.00, piksel: { w: 80,  h: 40 } }
                },
                dis: { 
                    'p2.5': { fiyat: 36.00, piksel: { w: 128, h: 64 } }, 'p3':   { fiyat: 24.00, piksel: { w: 104, h: 52 } },
                    'p4':   { fiyat: 15.00, piksel: { w: 80,  h: 40 } }, 'p5':   { fiyat: 11.00, piksel: { w: 64,  h: 32 } },
                    'p8':   { fiyat: 9.00,  piksel: { w: 32,  h: 16 } }, 'p10':  { fiyat: 8.00,  piksel: { w: 32,  h: 16 } }
                }
            },
            cards: { r712: 12.00 },
            adapters: { ic_40a: 9.00, dis_60a: 13.00 },
            // --- GÜNCELLENMİŞ PLAYER LİSTESİ (A4L ÇIKARILDI) ---
            players: [
                { ad: 'HD-A3L SDK\'LI', maxPiksel: 1280 * 512,  fiyat: 85.00 },
                { ad: 'HD-A5L',         maxPiksel: 1280 * 1024, fiyat: 175.00 },
                { ad: 'HD-A6L',         maxPiksel: 1920 * 1200, fiyat: 285.00 },
                { ad: 'HD-A7',          maxPiksel: 3840 * 1344, fiyat: 1400.00 },
                { ad: 'HD-A8',          maxPiksel: 3840 * 2160, fiyat: 1975.00 }
            ],
            cases_lookup: {
                '16': {'16x32':{tek:6.5,cift:13},'16x64':{tek:10.5,cift:21},'16x96':{tek:14.5,cift:29},'16x128':{tek:17.5,cift:35},'16x160':{tek:21,cift:42},'16x192':{tek:24,cift:46},'16x224':{tek:27.5,cift:52},'16x256':{tek:30.5,cift:59}},
                '32': {'32x32':{tek:11.5,cift:23},'32x64':{tek:16,cift:32},'32x96':{tek:21,cift:39.5},'32x128':{tek:25,cift:48},'32x160':{tek:31.5,cift:59},'32x192':{tek:37,cift:67},'32x224':{tek:44,cift:76.5},'32x256':{tek:52.5,cift:86.5}},
                '48': {'48x64':{tek:21,cift:40},'48x96':{tek:28,cift:52.5},'48x128':{tek:39,cift:62.5},'48x160':{tek:43,cift:75},'48x192':{tek:48.5,cift:87},'48x224':{tek:55,cift:97.5},'48x256':{tek:64,cift:112.5}},
                '64': {'64x64':{tek:27,cift:50},'64x96':{tek:36,cift:66},'64x128':{tek:45.5,cift:82.5},'64x160':{tek:56,cift:100},'64x192':{tek:66,cift:120.5},'64x224':{tek:76.5,cift:140.5},'64x256':{tek:87,cift:157}},
                '80': {'80x64':{tek:32,cift:60},'80x96':{tek:44,cift:80.5},'80x128':{tek:54.5,cift:99.5},'80x160':{tek:66.5,cift:120},'80x192':{tek:82.5,cift:141},'80x224':{tek:89,cift:159},'80x256':{tek:99.5,cift:180}},
                '96': {'96x64':{tek:36,cift:66},'96x96':{tek:49,cift:91},'96x128':{tek:61.5,cift:112},'96x160':{tek:76.5,cift:138},'96x192':{tek:89,cift:159.5},'96x224':{tek:101.5,cift:182.5},'96x256':{tek:116,cift:206.5}}
            },
            cases_fallback_sqm: { tek_tarafli: 55, cift_tarafli: 100 }
        };
        const SARF_MALZEME_FIYATI = 15.00;
        const karMarji = 1.40;
        const kdvOrani = 0.20;
        const modulGenislik = 32;
        const modulYukseklik = 16;
        
        const alanSelect = document.getElementById("alan");
        const mesafeInput = document.getElementById("mesafe");
        const pikselSelect = document.getElementById("pikselAraligi");
        const genislikSelect = document.getElementById("genislik");
        const yukseklikSelect = document.getElementById("yukseklik");
        const pixelInfoDiv = document.getElementById("pixelInfo");
        const hesaplaButton = document.getElementById("hesaplaButton");
        
        function populateDimensionDropdowns() {
            genislikSelect.innerHTML = '';
            yukseklikSelect.innerHTML = '';
            for (let i = modulGenislik; i <= 960; i += modulGenislik) {
                genislikSelect.add(new Option(`${i} cm`, i));
            }
            for (let i = modulYukseklik; i <= 960; i += modulYukseklik) {
                yukseklikSelect.add(new Option(`${i} cm`, i));
            }
        }
        
        function guncelleOneriVeSecenekler() {
            const alan = alanSelect.value;
            const mesafe = parseFloat(mesafeInput.value) || 0;
            for (const option of pikselSelect.options) {
                const pValue = option.value;
                option.style.display = (alan === 'ic' && PRICES.modules.ic[pValue]) || (alan === 'dis' && PRICES.modules.dis[pValue]) ? '' : 'none';
            }
            let onerilenPikselKodu = '';
            if (alan === 'ic') {
                if (mesafe > 0 && mesafe < 2) { onerilenPikselKodu = 'p1.86'; }
                else if (mesafe >= 2 && mesafe < 3) { onerilenPikselKodu = 'p2.5'; }
                else if (mesafe >= 3 && mesafe < 4) { onerilenPikselKodu = 'p3'; }
                else if (mesafe >= 4) { onerilenPikselKodu = 'p4'; }
            } else {
                if (mesafe > 0 && mesafe < 3.5) { onerilenPikselKodu = 'p2.5'; }
                else if (mesafe >= 3.5 && mesafe < 5) { onerilenPikselKodu = 'p3'; }
                else if (mesafe >= 5 && mesafe < 6) { onerilenPikselKodu = 'p4'; }
                else if (mesafe >= 6 && mesafe < 8) { onerilenPikselKodu = 'p5'; }
                else if (mesafe >= 8 && mesafe < 10) { onerilenPikselKodu = 'p8'; }
                else if (mesafe >= 10) { onerilenPikselKodu = 'p10'; }
            }
            let onerilenBulunduVeSecildi = false;
            for (const option of pikselSelect.options) {
                option.text = option.text.replace(' (Önerilen)', '');
                if (option.value === onerilenPikselKodu && option.style.display !== 'none') {
                    option.text += ' (Önerilen)';
                    option.selected = true;
                    onerilenBulunduVeSecildi = true;
                }
            }
            if (!onerilenBulunduVeSecildi && pikselSelect.selectedIndex > -1 && pikselSelect.options[pikselSelect.selectedIndex].style.display === 'none') {
                for(const option of pikselSelect.options){
                    if(option.style.display !== 'none'){
                        option.selected = true;
                        break;
                    }
                }
            }
        }

        function guncellePikselBilgisi() {
            if (!genislikSelect.value || !yukseklikSelect.value) return; 
            const alan = alanSelect.value;
            const pikselKodu = pikselSelect.value;
            const genislik = parseInt(genislikSelect.value);
            const yukseklik = parseInt(yukseklikSelect.value);
            const modulInfo = PRICES.modules[alan][pikselKodu];
            if (!modulInfo) {
                pixelInfoDiv.innerHTML = 'Bu panel türü seçilen mekan için uygun değil.';
                return;
            }
            const modulSayisiX = Math.ceil(genislik / modulGenislik);
            const modulSayisiY = Math.ceil(yukseklik / modulYukseklik);
            const toplamPikselX = modulSayisiX * modulInfo.piksel.w;
            const toplamPikselY = modulSayisiY * modulInfo.piksel.h;
            pixelInfoDiv.innerHTML = `Ekran Çözünürlüğü: <strong>${toplamPikselX} x ${toplamPikselY} Piksel</strong>`;
        }
        
        function hesapla() {
            const alan = document.getElementById("alan").value;
            const kasaTipiSecimi = document.getElementById("kasaTipi").value;
            const genislik = parseInt(document.getElementById("genislik").value);
            const yukseklik = parseInt(document.getElementById("yukseklik").value);
            const pikselKodu = document.getElementById("pikselAraligi").value;
            const sonucDiv = document.getElementById("sonuc");
            
            const secilenPikselOption = pikselSelect.options[pikselSelect.selectedIndex];
            const onerilenPikselAraligi = secilenPikselOption.text.replace(' (Önerilen)', '');
            if (!PRICES.modules[alan][pikselKodu]) {
                sonucDiv.innerHTML = `⚠️ <b>${onerilenPikselAraligi}</b> paneli <b>${alan === 'ic' ? 'Dış Mekan' : 'İç Mekan'}</b> için uygun değildir.`;
                return;
            }
            const modulX = Math.ceil(genislik / modulGenislik);
            const modulY = Math.ceil(yukseklik / modulYukseklik);
            const modulInfo = PRICES.modules[alan][pikselKodu];
            const toplamPikselX = modulX * modulInfo.piksel.w;
            const toplamPikselY = modulY * modulInfo.piksel.h;
            const ekranToplamPiksel = toplamPikselX * toplamPikselY;
            
            let secilenPlayer = PRICES.players.find(player => player.maxPiksel >= ekranToplamPiksel);
            let playerNotu = "";
            if (!secilenPlayer) {
                secilenPlayer = PRICES.players[PRICES.players.length - 1];
                playerNotu = " <small>(Çözünürlük Çok Yüksek!)</small>";
            }
            const playerFiyati = secilenPlayer.fiyat;
            const playerAdi = secilenPlayer.ad;
            
            const toplamGenislikMetre = (modulX * modulGenislik) / 100;
            const toplamYukseklikMetre = (modulY * modulYukseklik) / 100;
            const toplamAlanMetrekare = toplamGenislikMetre * toplamYukseklikMetre;
            const toplamModul = modulX * modulY;
            const modulBirimFiyat = PRICES.modules[alan][pikselKodu].fiyat;
            const modulToplamFiyat = toplamModul * modulBirimFiyat;
            const adaptorSayisi = Math.ceil(toplamModul / 6);
            const adaptorBirimFiyat = alan === "ic" ? PRICES.adapters.ic_40a : PRICES.adapters.dis_60a;
            const adaptorTipi = alan === "ic" ? `40 Amper` : `60 Amper`;
            const adaptorToplamFiyat = adaptorSayisi * adaptorBirimFiyat;
            let kartSayisi;
            const pikselDegeri = parseFloat(pikselKodu.replace('p', ''));
            if (pikselDegeri <= 1.86) { kartSayisi = modulX; }
            else if (pikselDegeri <= 2.5) { kartSayisi = Math.ceil(modulX / 2) * Math.ceil(modulY / 12); }
            else { kartSayisi = Math.ceil(modulX / 3) * Math.ceil(modulY / 12); }
            kartSayisi = Math.max(1, kartSayisi);
            const kartBirimFiyat = PRICES.cards.r712;
            const kartToplamFiyat = kartSayisi * kartBirimFiyat;
            let kasaToplamFiyat;
            let kasaHesaplamaNotu = "";
            const d1 = Math.min(genislik, yukseklik);
            const d2 = Math.max(genislik, yukseklik);
            const seriKeys = ['16', '32', '48', '64', '80', '96'];
            let seriKey = null;
            if (seriKeys.includes(String(d1))) seriKey = String(d1);
            else if (seriKeys.includes(String(d2))) seriKey = String(d2);
            const boyutKey = `${d1}x${d2}`;
            if (seriKey && PRICES.cases_lookup[seriKey] && PRICES.cases_lookup[seriKey][boyutKey]) {
                const fiyatlar = PRICES.cases_lookup[seriKey][boyutKey];
                kasaToplamFiyat = kasaTipiSecimi === "tek" ? fiyatlar.tek : fiyatlar.cift;
                kasaHesaplamaNotu = `(${seriKey} Serisi - ${boyutKey})`;
            } else {
                const kasaBirimFiyat = kasaTipiSecimi === "tek" ? PRICES.cases_fallback_sqm.tek_tarafli : PRICES.cases_fallback_sqm.cift_tarafli;
                kasaToplamFiyat = toplamAlanMetrekare * kasaBirimFiyat;
                kasaHesaplamaNotu = `(Tahmini ~${kasaBirimFiyat}$/m²)`;
            }
            const maliyetAraToplam = modulToplamFiyat + adaptorToplamFiyat + kartToplamFiyat + kasaToplamFiyat + playerFiyati + SARF_MALZEME_FIYATI;
            const karTutari = maliyetAraToplam * (karMarji - 1);
            const karliAraToplam = maliyetAraToplam + karTutari;
            const kdvTutari = karliAraToplam * kdvOrani;
            
            sonucDiv.innerHTML = `
                <h3>Maliyet ve Fiyat Dökümü</h3>
                <p><b>LED Panel (${onerilenPikselAraligi}):</b> ${toplamModul} adet × ${modulBirimFiyat.toFixed(2)}$ = <b>${modulToplamFiyat.toLocaleString("en-US")} $</b></p>
                <p><b>CNC Kasa ${kasaHesaplamaNotu}:</b> 1 adet = <b>${kasaToplamFiyat.toLocaleString("en-US", {minimumFractionDigits: 2, maximumFractionDigits: 2})} $</b></p>
                <p><b>Oynatıcı Kart (${playerAdi})${playerNotu}:</b> 1 adet = <b>${playerFiyati.toLocaleString("en-US", {minimumFractionDigits: 2})} $</b></p>
                <p><b>Alıcı Kart (HD-R712):</b> ${kartSayisi} adet × ${kartBirimFiyat.toFixed(2)}$ = <b>${kartToplamFiyat.toLocaleString("en-US")} $</b></p>
                <p><b>Güç Kaynağı (${adaptorTipi}):</b> ${adaptorSayisi} adet × ${adaptorBirimFiyat.toFixed(2)}$ = <b>${adaptorToplamFiyat.toLocaleString("en-US")} $</b></p>
                <p><b>Sarf Malzemeler:</b> 1 paket = <b>${SARF_MALZEME_FIYATI.toLocaleString("en-US", {minimumFractionDigits: 2})} $</b></p>
                <hr>
                <p><b>Maliyet Ara Toplam:</b> ${maliyetAraToplam.toLocaleString("en-US", {minimumFractionDigits: 2, maximumFractionDigits: 2})} $</p>
                <p><b>+ %${((karMarji - 1) * 100).toFixed(0)} Kâr Marjı:</b> ${karTutari.toLocaleString("en-US", {minimumFractionDigits: 2, maximumFractionDigits: 2})} $</p>
                <p class="total">ANAHTAR TESLİM SATIŞ FİYATI: ${karliAraToplam.toLocaleString("en-US", {minimumFractionDigits: 2, maximumFractionDigits: 2})} USD + ${kdvTutari.toLocaleString("en-US", {minimumFractionDigits: 2, maximumFractionDigits: 2})} KDV</p>
            `;
        }

        // --- Olay dinleyicilerini ve başlangıç fonksiyonlarını çağır ---
        populateDimensionDropdowns();
        alanSelect.addEventListener('change', () => { guncelleOneriVeSecenekler(); guncellePikselBilgisi(); });
        mesafeInput.addEventListener('input', guncelleOneriVeSecenekler);
        pikselSelect.addEventListener('change', guncellePikselBilgisi);
        genislikSelect.addEventListener('change', guncellePikselBilgisi);
        yukseklikSelect.addEventListener('change', guncellePikselBilgisi);
        hesaplaButton.addEventListener('click', hesapla);
        guncelleOneriVeSecenekler();
        guncellePikselBilgisi();
    });
  </script>


  <!-- ===== FOOTER ===== -->
  <footer class="footer">
    <div class="container footer__inner">
      <div>© <span id="yil"></span> Elite LED</div>
      <div class="pill pill--muted">İstanbul, Türkiye</div>
    </div>
  </footer>

  <script>
    document.getElementById('yil').textContent = new Date().getFullYear();
  </script>
  <script>
    (async function () {
      try {
        const res = await fetch('nav.html');
        if (res.ok) {
          const html = await res.text();
          document.getElementById('nav-placeholder').innerHTML = html;
        }
      } catch (e) {
        console.warn('Nav include failed', e);
      }
    })();
  </script>
  <noscript>Tarayıcınızda JavaScript kapalı. Yıl bilgisi sabit görünebilir.</noscript>
</body>

</html>